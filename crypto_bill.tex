\section{Crypto “Bank” bill}

The bill has a value $V$, public/private key $(y, x)$ and the bank bill number $B$, which is the hash of the bill.\\
V can have the value of a natural number: $V \in N$\\
This is a newly printed bill:
%\begin{equation}
\begin{align}
 Y_{alice} & = H ( L_{k+1} \parallel y_{alice} ) \\
 B_{k+1} & = H ( V \parallel L_{k+1} \parallel t_{k+1} \parallel T \parallel Y_{alice} )
\end{align}
%\end{equation}

($H$ is a hash function, is the hash of the previous confirmed Bull’s eye,  is the consensus timestamp of the current Epoch, is the epoch number and $T$ is the contact type) \\

The total value of all bills of type $T$ must be accounted for.
\begin{align}
 V_{total,k+1} & = V_{total,k+1} + V_{k} 
\end{align}


\paragraph{Simple transaction}
Ownership of the bill can be transferred to Bob, if:
\begin{itemize}
 \item 
    Bob reveals his public key to Alice 
 \item 
    Alice generates a new bill and signs it with her private key 
\end{itemize}


Because of the network fee, the value will be reduced by ${\Delta}V$.
\begin{equation}
 V_{k+1} = V_k - {\Delta}V
\end{equation}

If $V_{k+1}$ is negative or zero, the transaction is eliminated and will not generate a new bill.
\begin{equation}
 V_{total,k+1} = 
 \begin{cases}
  V_{total,k} - {\Delta}V & \text{if} ~ ( V_k - {\Delta}V \ge 0 ) \\
  V_{total,k} - V_k & \text{otherwise}     
 \end{cases}
\end{equation}


Resulting in:
\begin{equation}
 \begin{align*}
 Y_{bob} & = H(B_k \parallel y_{bob} ) \\
 B_{k+1} & = H ( V \parallel B_k \parallel t_k \parallel k \parallel T \parallel Y_{bob} )
\end{align*}
\end{equation}


The new bill is now written to the DART with key $B_{k+1}$:
\begin{equation*}
 V_{k+1}, B_k, t_k, k, T, Y_{bob} 
\end{equation*}


The old bill $B_k$  is removed from the DART. \\ 

The Split of a crypto bill \\
A bill can be split into a number of other bills if the combined value of the new nodes matches the original:
 \begin{equation}
  V_k = \left [ \sum_{i=0}^{I-1} {V_{k+1,i}} \right ] + {\Delta}V
 \end{equation}

Each new bill is generated as:
\begin{equation}
 \begin{align*}
 Y_{k+1,i} & = H ( B_k \parallel y_{k+1,i} ) \\
 B_{k+1,i} & = H ( V_{k+1} \parallel B_k \parallel t_k \parallel k \parallel T \parallel Y_{k+1} ), 
 ~ y_{k+1,i} \ne y_{k+1,j} ~ \text{for} ~ (i \ne j) \\
\end{align*}
\end{equation}
 

All new bills marked $B_{k+1}$ are stored in the DART as before, and the old bills are removed. \\
Join or collect bills into one bill.\\
A number of bills can be collated into one bill if the value adds up as follows:
\begin{equation}
 V_a = \left[ \sum_{i=0}^{I-1} {V_{b,i}} \right] + {\Delta}V    
\end{equation}

The new common bill number is generated by hashing a sorted list of the joined bill numbers.  
\begin{equation}
 B'_k = H ( B_{k,0} \parallel B_{k,1} ... \parallel B_{k,I-1} )
\end{equation}

The new bill number will be generated: 
\begin{equation}
 \begin{align*}
  Y'_{k+1} & = H ( B'_k \parallel y_{k+1} ) \\
  B_{k+1} & = H ( V_a \parallel B'_k \parallel t_k \parallel k \parallel T \parallel Y'_{k+1} ) \\
 \end{align*}
\end{equation}

These new consolidated bills are stored in the DART.
